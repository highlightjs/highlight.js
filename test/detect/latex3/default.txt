\cs_new:Nn \hljs_gcd:nn
  {
    \int_compare:nNnTF { #1 } > { #2 }
      { \__hljs_gcd:nn { #1 } { #2 } }
      { \__hljs_gcd:nn { #2 } { #1 } }
  }
\cs_new:Nn \__hljs_gcd:nn
  {
    \int_compare:nNnTF { #2 } = 0
      { #1 }
      {
        \__hljs_gcd:ee
          { #2 }
          { \int_mod:nn { #1 } { #2 } }
      }
  }
\cs_generate_variant:Nn \__hljs_gcd:nn { ee }
\cs_new:Nn \hljs_reduced_frac:nn
  {
    \hljs_canceled_frac:nne
      { #1 } { #2 } { \hljs_gcd:nn { #1 } { #2 } }
  }
\cs_new:Nn \hljs_canceled_frac:nnn
  {
    \hljs_frac:ee
      { \int_div_truncate:nn { #1 } { #3 } }
      { \int_div_truncate:nn { #2 } { #3 } }
  }
\cs_generate_variant:Nn \hljs_canceled_frac:nnn { nne }
\cs_new:Nn \hljs_frac:nn
  {
    \int_compare:nNnTF { #2 } = 1
      { #1 }
      { \frac{ #1 }{ #2 } }
  }
\cs_generate_variant:Nn \hljs_frac:nn { ee }
\NewDocumentCommand \reducedfrac { m m }
  { \hljs_reduced_frac:nn { #1 } { #2 } }
